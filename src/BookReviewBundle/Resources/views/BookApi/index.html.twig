{% extends "::base.html.twig" %}

{% block body %}
    <h1>Book API Search</h1>
    <div class="container">
        <form action="/googleapi/search" method="post">
            {% if searchValue %}
                <input type="text" value="{{ searchValue }}" name="searchText">
            {% else %}
                <input type="text" name="searchText">
            {% endif %}
            <input type="submit" value="Search" />
        </form>


        {% for book in books %}
            <div class="row">
                <div class="col-md-6 well">
                    <a href="{{ path('book_show', { 'id': book.id }) }}"><h2>{{ book.title }}</h2></a>
                    <h3>{{ book.author }}</h3>
                    {% if book.imageName is not empty %}
                        {% if book.imageFile is empty %}
                            <img class="img-responsive book-image" src="{{ book.imageName }}" alt="{{ book.title }}" />
                        {% else %}
                            <img class="img-responsive book-image" src="{{ vich_uploader_asset(book, 'imageFile') }}" alt="{{ book.title }}" />
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        {% endfor %}

        <nav aria-label="Page navigation">
            <ul class="pagination">

                {% if selectedPage > 1 %}
                    <li class="page-item"><a class="page-link " href="search?searchText={{ searchValue }}&p={{ selectedPage-1 }} ">Previous</a></li>
                {% endif %}

                {% for page in pages %}
                    {% if selectedPage == page %}
                        <li class="page-item active"><a class="page-link " href="search?searchText={{ searchValue }}&p={{ page }} ">{{ page }}</a></li>
                    {% else %}
                        <li class="page-item"><a class="page-link" href="search?searchText={{ searchValue }}&p={{ page }} ">{{ page }}</a></li>
                    {% endif %}
                {% endfor %}

                {% if selectedPage < endPage %}
                    <li class="page-item"><a class="page-link " href="search?searchText={{ searchValue }}&p={{ selectedPage+1 }} ">Next</a></li>
                {% endif %}
            </ul>
        </nav>
    </div>
{% endblock %}
